<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Meta Tags</title>
    <meta name="description" content="Wine - A great experience.">
    <meta name="keywords" content="wine, experience">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Wine Experience">
    <meta property="og:description" content="Discover the best wine experiences.">
    <meta property="og:image" content="https://api-v1.vooconnect.com:9452/uploads/thumbnails/thumbnail-1724813598740.jpg">
    <meta property="og:url" content="https://app.vooconnect.com/">
    <meta property="og:type" content="website">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Wine Experience">
    <meta name="twitter:description" content="Discover the best wine experiences.">
    <meta name="twitter:image" content="https://api-v1.vooconnect.com:9452/uploads/thumbnails/thumbnail-1724813598740.jpg">
    <meta name="twitter:site" content="@yourtwitterhandle">

    <script>
    document.addEventListener('DOMContentLoaded', async () => {
        try {
            console.log('Document loaded, starting API fetch...');
            const apiUrl = 'https://api-v1.vooconnect.com:9451/api/v1/get-post-by-id';
            const token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNzE4YTZjNmUtMTRmOS00YTc1LWFkMTQtNTBiZjIxNGQ4ZWI5IiwiaWF0IjoxNzI0ODExNjA4LCJleHAiOjE3Mjc0MDM2MDh9.6_PUp_uoYYJRP6jAju3xorzxcaHkw6Fbeza2-2ZNMtU';

            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ post_id: 548 })
            });

            if (!response.ok) {
                throw new Error('Network response was not ok');
            }

            const data = await response.json();
            console.log('API response:', data);

            if (data.status && data.posts.length > 0) {
                const post = data.posts[0];
                const baseUrl = 'https://api-v1.vooconnect.com:9452/uploads';

                // Update <meta property="og:title">
                let ogTitle = document.querySelector('meta[property="og:title"]');
                if (!ogTitle) {
                    ogTitle = document.createElement('meta');
                    ogTitle.setAttribute('property', 'og:title');
                    document.head.appendChild(ogTitle);
                }
                ogTitle.content = post.title || 'Default Title';

                // Update <meta property="og:image">
                let ogImage = document.querySelector('meta[property="og:image"]');
                if (!ogImage) {
                    ogImage = document.createElement('meta');
                    ogImage.setAttribute('property', 'og:image');
                    document.head.appendChild(ogImage);
                }
                ogImage.content = baseUrl + post.thumbnail_url;

                console.log('Meta tags updated.');
            } else {
                console.error('No posts found or status is not true');
            }

        } catch (error) {
            console.error('Error fetching meta data:', error);
        }
    });
    </script>
</head>
<body>
    <h1>Meta Tags Loaded Dynamically</h1>
    <p>This page will dynamically load meta tags from an API.</p>
</body>
</html>
